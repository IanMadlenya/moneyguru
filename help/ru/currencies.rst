Валюты
==========

moneyGuru имеет мощную поддержку мультивалютности в учете. Каждая сумма имеет информацию о валюте. Любая сумма, которую вы вводите, может быть в любой валюте. Мы приложили много усилий, чтобы вы всегда понимали, какая валюта указана в сумме без явного указания кодов валют при этом.

Одно из центральных понятий в moneyGuru заключается в том, что есть 2 типа валюты. **Местная** валюта и **Иностранная** валюта. Местная валюта - своя для каждого документа. Ее можно установить в Свойствах документа (в меню открытия новой вкладки). Это валюта, наиболее часто используемая в документе. Иностранная валюта - любая другая валюта.

Отображение этих валют работает по очень простому правилу: если сумма в местной валюте, то это так и указывается. В противном случае, рядом с суммой будет показан 3-буквенный ISO-код валюты (USD, CAD, EUR, GBP и т. д.).

Правила ввода суммы лишь чуть сложнее: почти во всех случаях ввод суммы без кода валюты означает, что эта сумма будет в местной валюте. Однако, если вы на вкладке просмотра счета в иностранной валюте, ввод суммы без кода валюты создаст суммы с валютой **счета**. Причина этого в том, что даже если вашей родной валютой является USD, то когда вы вводите записи счета в EUR, то **очень** вероятно, хотите ввести сумму в евро. Конечно, вы **всегда** можете явно ввести код валюты либо перед, либо после суммы, чтобы указать нужную валюту.

Некоторые другие приложения делают автоматическое преобразование суммы при переводе между счетами в разных валютах. Это не имеет особого смысла, поскольку в случае снятия 200 евро в банкомате во время поездки, сумма, которая будет снята с вашего счета в долларах США в большинстве случаев будет отличаться от курса на этот день. В любом случае, курс обмена валюты является оценочным и должен рассматриваться как таковой. В moneyGuru валюта суммы остается такой как есть (200 евро), пока вы не внесете корректировку в сумму (после получения банковской выписки).

Хотя moneyGuru не использует обменный курс для пересчета сумм в операциях, она использует его для других целей: чистая стоимость, прибыль и текущая оценка баланса. Ваш собственный капитал и прибыль в moneyGuru всегда отображаются в местной валюте. Если у вас есть счет в иностранной валюте, то вы, скорее всего, не знаете точные значения сумм на этом счете. Поэтому moneyGuru автоматически выбирает нужный курс по каждой операции и использует его в расчетах. Для текущего баланса вполне допустимо, что у вас временно может быть сумма в иностранной валюте либо активом, либо обязательством, пока вы не сверите эту сумму (и смените ее на валюту счета).

Исключения для вкладок
---------------------

Есть маленькое исключение в поведении валюты: итоги в ведомостях. Во вкладках Чистая стоимость и Прибыли и Убытки итоги (которые всегда отображаются в документе в родной валюте) будут иметь свои валюты (напрямую не показываемые), когда есть хотя бы один счет в другой валюте.

Это позволяет избежать распространенной путаницы для новых пользователей, которые думают, что итоги не сходятся. Есть также довольно распространенный случай, когда все счета в валюте, отличной от валюты документа, потому что документ не был должным образом настроен. Подведение итогов по валютам делает такую проблему очевидной и ее легче исправить.

.. _multi-currency-txn:

Мультивалютные транзакции
--------------------------------

Подавляющее большинство ваших транзакций, даже если вы используете несколько валют, 
будут содержать только одну валюту. Если вы покупаете виджет за 200 EUR на eBay с вашей
кредитной карты в USD (для которой будет создана транзакция Кредитная карта --> Виджеты 
с суммой 200 EUR), то при сверке счета вашей кредитной карты, эта сумма будет изменена на USD 
(с кредитной карты будет снята сумма в долларах США, эквивалентная 200 евро).

Однако, если вы сделали перевод с актива/обязательства на другой актив/обязательство в разных
валютах, то правила меняются. Если, к примеру, вы переводите 100 долларов США с одного 
банковского счета на ваш банковский счет в евро, то одна часть транзакции остается в долларах,
а другая - в евро.

Это сложная проблема. Из-за того, что курсы валют являются ориентировочными, в транзакции не будет
баланса, а, как вы знаете, в транзакции всегда должен быть баланс. Поэтому есть исключение из
этого правила:  **Транзакция с участием более одной валюты всегда имеет баланс**. В примере выше
мы остановились на транзакции, у которой по кредиту 100 USD в одной части и по дебету 65 EUR в другой.

Чтобы создать мультивалютную транзакцию, перейдите в "другую часть" транзакции и введите
сумму в другой валюте. Вы также можете использовать панель транзакции, чтобы вручную исправить записи. 
К примеру, чтобы добавить вышеописанную транзакцию, сначала перейдите к Расчетному счету, добавьте
транзакцию на 100 USD и перевод на "счет EUR". Затем перейдите в "счет EUR" и измените сумму 
100 USD на 65 EUR. moneyGuru автоматически определит, что "другая часть" - это актив в другой
валюте и что 100 USD с другой стороны должны сохраниться при создании мультивалютной транзакции.

Даже если курсы обмена известны, банки зачастую дают вам обменный курс ниже текущего для 
мультивалютных операций. Поэтому, несмотря на то, что мультивалютные транзакции всегда в балансе, вы 
иногда захотите использовать обменный курс, чтобы иметь возможность получить баланс, так что вы 
сможете рассчитать разницу между текущим обменным курсом и курсом, предоставленным банком в 
качестве расхода. Вот для чего нужна кнопка **Мультивалютный баланс** на панели Информация о транзакции. 
Когда вы кликнете по ней, будет создана новая запись в транзакции с суммой разницы между "двумя частями"
транзакции при использовании обменных курсов на дату транзакции.

Правила для валют
--------------

* Суммы в иностранных валютах **всегда** явно указаны с их ISO-кодом.
* Указаный явно ISO-код валюты в сумме **всегда** делает ее суммой в указанной валюте.
* Введя сумму без указания валюты, вы всегда получите сумму в местной валюте, исключая только:

    * редактирование счета в иностранной валюте.
    * когда редактирование разбивает транзакцию в иностранной валюте.

* Чистая стоимость и прибыли расчитываются в местной валюте.
* Транзакции, включающие несколько валют, всегда имеют баланс.

Индивидуальные валюты
-----------------

Начиная с версии 2.7.0 moneyGuru поддерживает индивидуальные валюты с помощью :doc:`плагинов <plugins>`. 
Вы можете определить новые валюты и установить пользовательский курс обмена таких валют. Если это вам нужно,
начните с ознакомления входящего в комплект примера плагина ``yahoo_currency_provider``.

Поддерживаемые валюты
--------------------

* [USD] Доллар США
* [EUR] Евро
* [GBP] Британский фунт стерлингов
* [CAD] Канадский доллар
* [AUD] Австралийский доллар
* [JPY] Японская йена
* [INR] Индийская рупия
* [NZD] Новозеландский доллар
* [CHF] Швейцарский франк
* [ZAR] Южноафриканский Рэнд
* [AED] Дирхам О. А. Э.
* [ANG] Флори Антильских островов 
* [ARS] Аргентинское песо
* [ATS] Австрийский шиллинг
* [BBD] Барбадосский доллар
* [BEF] Бельгийский франк
* [BHD] Бахрейнский динар
* [BRL] Бразильский Реал
* [BSD] Багамский доллар
* [CLP] Чилийское песо
* [CNY] Китайский Юань
* [COP] Колумбийское песо
* [CZK] Чешская крона
* [DEM] Немецкая марка
* [DKK] Датская крона
* [EGP] Египетский фунт
* [ESP] Испанская песета
* [FIM] Финская марка
* [FJD] Доллар Фиджи
* [FRF] Французский Франк
* [GHC] Ганы
* [GHS] Ганский седи (новый)
* [GRD] Греческая драхма
* [GTQ] Гватемальский кетцаль
* [HKD] Гонконгский доллар
* [HNL] Гондурасская лемпира
* [HRK] Хорватская Куна
* [HUF] Венгерский форинт
* [IDR] Индонезийская рупия
* [IEP] Ирландский фунт
* [ILS] Израильский новый шекель
* [ISK] Исландская крона
* [ITL] Итальянская Лира
* [JMD]  Ямайский доллар
* [KRW] Южно-корейский вон
* [LKR] Шри-ланкийская рупия
* [LTL] Литовские литы
* [LVL] Латвийские латы
* [MAD] Морроканский дирхам
* [MMK] Мьянма (Бирма) кьят
* [MXN] Мексиканский песо
* [MYR] Малайзийский ринггит
* [MZN] Мозамбикский метикал
* [NIO] Никарагуанская Кордоба
* [NLG] Нидерландский гульден
* [NOK] Норвежская крона
* [PAB] Панамский Бальбоа
* [PEN] Перуанский новый соль
* [PHP] Филипинское песо
* [PKR] Пакистанская рупия
* [PLN] Польский злотый
* [PTE] Португальское эскудо
* [RON] Новый румынский лей
* [RSD] Сербский динар
* [RUB] Российский рубль
* [SEK] Шведская крона
* [SGD] Сингапурский доллар
* [SIT] Словенский толар
* [SKK] Словацкая крона
* [THB] Тайский бат
* [TND] Тунисский динар
* [TRL] Турецкая Лира
* [TWD] Тайваньский новый доллар
* [UAH] Украинская гривна
* [VEB] Венесуэльский Боливар
* [VEF] Венесуэльский Боливар фуэрте
* [VND] Вьетнамский Донг
* [XAF] Франк КФА
* [XCD] Восточно-Карибский доллар
* [XPF] Франк КФП
