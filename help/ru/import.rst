Импорт данных в moneyGuru
=============================

moneyGuru поддерживает загрузку форматов QIF, OFX, QFX и CSV. Чтобы загрузить файл, выберите пункт меню "Импорт..." в меню "Файл", затем выберите файл для импорта. После этого откроется окно импорта, которое выглядит так:

|import_window|

Для каждого счета из файла будет создана вкладка в окне импорта. Этот диалог довольно прост в использовании. Самая левая колонка с галочкой определяет какие транзакции будут загружены. Просмотрите транзакции для испорта, снимите галочки с транзакций, которые вы не хотите загружать и нажмите Импорт. Только один счет (выбранный в данный момент) загружается за раз.

Исправление ошибок
-----------------

moneyGuru делает все возможное, чтобы автоматически загрузить данные из ваших файлов.
Однако, иногда это бывает невозможно из-за неоднозначности данных (особенно в случае
форматов дат). В этом случае moneyGuru загрузит лучшее (по ее мнению) значение 
и даст вам возможность исправить вручную с помощью поля в верхней правой части окна импорта.
Это поле состоит из списка из 5 значений:

* 3 первых исправляют формат даты.
* 4-ое меняет значения в полях Контрагент и Описание.
* Пятое инвертирует суммы.

Бывают случаи, когда все даты в файле неоднозначны (как, например, "01/02/03") и moneyGuru
не может сам распознать правильный формат. В этом случае вам будет предложен один из форматов,
но, вполне возможно, что он будет ошибочным. Первые три элемента списка позволят вам исправить эту ситуацию.
Они будут выглядеть типа "dd/MM/yy --> MM/dd/yy". В левой части будет указан формат чтения даты, а в правой
части будет формат, который применится к датам, если вы нажмете "Исправить".
Также возможно, что при выборе одного из трех этих пунктов кнопка "Исправить" станет недоступна. 
Это потому, что применяя это исправление, получится некорректный результат
(к примеру, дата в 13-м месяце). moneyGuru не будет применять такое исправление.

Иногда поля Описание и Контрагент перепутаны. Причиной может быть ошибка в программе, в
которой создан файл, неоднозначность в формате файла или что-то еще. Но это неважно, 
потому что вы можете исправить это с помощью 4-го пункта списка исправлений.

И, наконец, последний элемент списка позволяет инвертировать суммы, то есть превратит "42.00" в
"-42.00". Это может никогда не понадобиться, но если все-таки будет нужно, вы будете рады, что такой вариант есть.

Опция "Применить ко всем счетам" применит выбранный вид исправления ко всем загружаемым счетам, к которым 
применимо это исправление.

Импорт в существующий счет
----------------------------------

По-умолчанию, транзакции импортируются в новый счет. Однако, если есть такая необходимость, вы можете добавить их к уже существующим на вашем счете, просто сменив счет для загрузки. При импорте файлов OFX, нужный счет будет выбран автоматически, если он существует. При выборе нужного счета таблица немного меняется и становится похожей на эту:

|import_match_table|

Причиной этого является то, что при загрузке в имеющийся счет есть вероятность, что эти транзакции уже существуют. Вы должны сказать moneyGuru какие транзакции должны быть загружены. При импорте файла OFX, все это сделается автоматически, но вы можете изменить это при желании вручную.

С левой стороны таблицы (3 первые колонки) это :doc:`несверенные <reconciliation>` транзакции существующего счета. С правой стороны - транзакции, которые импортируются. Транзакции, для которых не найдено соответствие, с одной стороны пустые. В транзакциях, для которых найдено соответствие с имеющимися транзакциями, заполнены обе стороны и иконка с замком посередине. Вы моежете изменить это соответствие, кликнув на замок. Или сделать ручное соответствие, перетащив одну транзакцию к другой.

При импорте файла OFX в счет, в который ранее уже загружали из формата OFX, все эти соответствия настроятся автоматически. Это исключение в правиле, что только несверенные транзакции показываются в левой стороне. Если транзакция в файле OFX соответствует сверенной транзакции существующего счета, она будет показана вам, но галочка "импорт" будет снята (обычно она устанавливается сразу). Потому что если транзакция сверена, то вам не нужно ее менять.

Импорт из CSV
----------

Импорт их формата CSV похож на импорт любого другого формата файлов, но перед этим в главном окне импорта вы должны сказать moneyGuru чему соответствует каждая колонка файла CSV.

|import_csv_options|

Проблема с CSV в том, что нет стандартной структуры этих файлов. Это окно позволит вам настроить соответствие колонок. Для этого посмотрите, что находится в колонках и когда вы поймете что находится в колонке (к примеру, дата), кликните на ее заголовке и выберите нужное поле транзакции для нее. Колонки Дата и Сумма являются обязательными.

CSV файлы часто имеют заголовок (а иногда и подвал!), но moneyGuru понятия не имеет, какие строки чем являются. Поэтому вы должны снять отметку в колонке Импорт для каждой строки, которую не нужно загружать.

Иногда файлы CSV такие странные, что moneyGuru не может правильно распознать разделитель, который отделяет поля в них. Поэтому вы можете увидеть совсем странные данные в колонках, где половина числа в одной колонке, а половина - в другой. В этом случае используйте поле **Разделитель** чтобы вручную указать разделитель полей в файле CSV. После этого нажмите кнопку Обновить, чтобы перезагрузить данные в нужные колонки.

moneyGuru запоминает колонки и заголовки при загрузке. Но если у вас есть несколько типов файлов CSV для регулярной загрузки, вы можете использовать Схемы. Каждая схема хранит свою конфигурацию колонка/заголовок.

Можно также определить нужный счет прямо в окне настроек CSV. При этом происходит то же самое, что и при указании нужного счета позже, в окне импорта, за исключением того, что если вы укажите его в окне параметров CSV, он будет сохранен в Схеме.

.. |import_window| image:: image/import_window.png
.. |import_match_table| image:: image/import_match_table.png
.. |import_csv_options| image:: image/import_csv_options.png
