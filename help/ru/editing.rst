Редактирование документа moneyGuru
============================

Основы
----------

В moneyGuru есть несколько горячих клавиш и кнопок, которые работают одинаково для всех представлений. Во-первых, это набор из 3 кнопок в нижнем левом углу:

|edition_buttons|

Кнопка "+" создает новую сущность, кнопка "-" удаляет выбранную сущность, а кнопка "i" показывает информацию о выбранной сущности. "Сущность" зависит от текущего представления. В балансе и отчете о прибылях и убытках это счет. В транзакциях и просмотре счета - это транзакция. Также, если вы выберите более одной транзакции и нажмете на кнопку "i", откроется панель массового редактирования, а не информация о транзакции.

Конечно, можно сделать то же самое на клавиатуре. |cmd|\ N создаст новую сущность, Delete или Backspace удалят выделенную сущность, а |cmd|\ I покажет информацию о выбранной сущности.

Можно редактировать сущности двойным кликом на ячейке (например, название счета). Также можно начать редактирование сущности, выбрав ее и нажав Ввод. 

В режиме редактирования Tab и Shift-Tab могут быть использованы для перехода по редактируемым ячейкам. Если в строке больше не будет редактируемых ячеек, редактирование закончится. Кроме того, можно закончить редактирование, нажав Ввод. Вы можете отменить редактирование, нажав клавишу Escape. При этом все, что вы редактировали, будет возвращено до старых значений.

Счета
--------

Счета редактируются в Балансе (вкладка Чистая прибыль) и Отчете о прибылях и убытках (Прибыли и Убытки). Когда вы создаете новый счет, он будет создан в соответствии с тем типом счета, который выбран в настоящий момент. Например, если выберете счет "Кредитная карта" и нажмете |cmd|\ N, будет создан новый счет обязательств. После этого вы сможете ввести название нового счета, затем нажмите клавишу Ввод для окончания редактирования.

Вы можете также использовать перетаскивание (drag & drop) для того, чтобы изменить Тип счета или группы (да, даже группы счетов. Используйте |cmd_shift|\ N, чтобы создать такую).

|edition_account_panel|

Нажав на кнопку Показать информацию для счета, откроется панель редактирования счета, как показано выше. Там вы можете отредактировать название счета, а также изменить его тип, его :doc:`валюту <currencies>` и Номер счета. Номер счета - это числовое обозначение счета. Используйте его, если вы пользуетесь номерами счетов (например, так: номера с 1000 по 1999 для активов, с 8000 по 8999 для расходов и т.д.). Если счет имеет номер счета, этот номер будет отображаться вместе с названием в Транзакциях и Представлении счетов. Кроме того, можно ввести число вместо имени счета, чтобы ссылаться на этот счет (если вы знаете цифры наизусть, это сделает набор гораздо быстрее).

Еще про счета и валюты: вы можете изменить валюту только того счета, по которому не было :doc:`сверочных записей <reconciliation>`. Если по каким-то причинам вы хотите изменить валюту таких
счетов, вам придется отменить сверку по этим записям в первую очередь. Обратите внимание, что изменение валюты счета никак **не** отразится на валюте транзакций, которые он содержит.

Транзакции
------------

Транзакции редактируются в представлениях Транзакции и Просмотр счета. При создании новой транзакции, ее дата будет такая же, как у ранее выбранной транзакции (см. "Дата редактирования" ниже). Столбцы Описание, Контрагент и Счет (Откуда и Куда переводим) имеют автодополнение (см. "Автодополнение" ниже).

Также можно изменить порядок транзакций, введенных в одну дату. Для этого можно перетаскивать транзакции или нажать |cmd|\ + и |cmd|\ -.

Если вы вводите имя счета, которого еще не существует, в колонку счета, этот счет будет автоматически создан в качестве счета доходов или расходов (в зависимости от суммы транзакции). Не волнуйтесь об опечатках, создавая кучи счетов, которые вам придется подчищать. Если вы сразу же исправите опечатку в транзакции, то автоматически созданный счет будет автоматически удален.

|edition_transaction_panel|

Используя кнопку Показать информацию для одной транзакции отроет соответствующее окно. С его помощью вы можете отредактировать все, что можно редактировать во вкладках Транзакции и Просмотр счета, а кроме того, вы можете создавать и редактировать транзакции с более чем 2 записями (обычно называемые "разделенные транзакции") в таблице внизу.

И запомните одну вещь: таблица редактирования записи постоянно авто-балансируемая. Поэтому, если вы берете транзакцию и просто удалите одну ее запись, она не исчезнет. Она мгновенно добавит неназначенную запись с той же суммой. Изменение суммы записи также автоматически добавит неназначенную запись с суммовой разницей. Поэтому, если вы хотите разделить транзакцию, как, например, общий платеж с соседом, где Вы платите 40$ (допустим, за интернет) с помощью прямого банковского перевода, а ваш сосед дает вам 20$ наличными, сделайте следующее:

#. Добавьте обычную транзакцию с двойной записью Расчетный счет --> Коммунальные платежи.
#. Откройте Показать информацию для этой транзакции.
#. Измените дебет Коммунальных платежей на 20$. Это создаст 3-ю неназначенную строку с 20$ в дебете.
#. Измените счет в 3-ем ряду на Наличные.

|edition_three_way_split|

Поздравляем, вы только что сделали разделенную транзакцию с тремя проводками. Эта транзакция соответствует действительности: 40$ находятся вне Вашего расчетного счета, на интернет израсходовано 20$ и у вас 20 долларов в кармане.

Есть две специальные кнопки под таблицей разделения, **Мультивалютный баланс** и **Назначить дисбаланс**. Мы не будем рассматривать здесь первый, потому что он рассмотрен в :doc:`валютах <currencies>`.
Что касается Назначить дисбаланс, это удобный ярлык для назначения всех остальных несбалансированных сумм (суммы в разделенных транзакциях, неназначенные ни одному счету) для выбранного вида разделения.

Давайте рассмотрим наш предыдущий пример еще раз. Допустим, что вместо изменения суммы Коммунальных платежей до 20$, вы вместо этого добавили новую строку 20$ по счету Наличные. Теперь у вас 4 строки, из которых 40$ на Коммунальные платежи и 20$ - неназначенные. Конечно, вы могли бы вручную вычесть 20$ на Коммунальные, но иногда это утомительно, тем более когда у вас есть комплексные числа.

Все, что вам нужно сделать вместо этого, так это выбрать строку Коммунальные платежи и нажать кнопку Назначить дисбаланс. Неназначенные строки будут "слиты" с выбранной строкой с итоговой суммой 20$.

|edition_mass_edition_panel|

Используя Показать информацию для более чем одной транзакции откроет вышеуказанное окно. В нем вы можете выполнять массовое редактирование. При нажатии на Сохранить, все выбранные транзакции будут иметь атрибуты, выставленные в полях, рядом с которыми проставлены галочки.

Редактирование даты
------------

Даты редактируется с помощью специального виджета. Этот виджет имеет 3 поля: день, месяц и год. Всякий раз, когда начинается операция редактирования, поле **день** всегда выделен в первую очередь, независимо от формата даты. Вы можете перемещаться по полям с помощью стрелок влево и вправо. Вы можете увеличивать и уменьшать выбранное в данный момент поле стрелками вверх и вниз. Можно вводить дату вручную. Виджет автоматически изменяет выделение, когда вводится разделитель даты или будет достигнута максимальная длина поля. Вот список правил, которым следует этот виджет, чтобы было понятнее:

* Формат отображения даты всегда соответствует формату вашей системы.
* Формат **ввода** всегда такой: день --> месяц --> год.
* Независимо от формата дат вашей системы, вы можете ввести дату, заполняя свои значения 0. Например, даже если ваш формат даты мм/ДД/гг, вы можете ввести дату "07/06/08", введя "060708".
* Независимо от формата дат вашей системы, вы можете ввести дату с помощью разделителей. Например, даже если ваш Формат даты ГГГГ-мм-ДД, вы можете ввести "2008-07-06", введя "6-7-08"
* Вы можете нажать на букву "Т", чтобы быстро перевести дату на сегодня.

При редактировании транзакции или записи, если вы установите дату за пределами текущего периода, вы увидите |backward_16| или |forward_16|. Это означает, что если ваш период "навигационный" (месяц, квартал, год), то диапазон дат будет скорректирован, когда редактирование закончится, чтобы показать отредактированные транзакции. Если текущий диапазон дат не "навигационный" (с начала года, текущий год, Произвольный интервал), то транзакция исчезнет из текущего представления при завершении редактирования.

Редактирование сумм
--------------

Поля для ввода сумм имеют несколько скрытых возможностей. 

* Вы можете ввести простые выражения вроде "2+4.35/2" и они будут автоматически рассчитаны.
* Если вы включили опцию "Автоматически помещать десятичные числа при вводе", то при вводе чисел без десятичной точки она будет автоматически добавлена. Например, если валюта по-умолчанию доллар США, то при вводе "1234" сумма станет "12.34".
* Вы всегда можете явно указать валюту суммы путем добавления перед или после суммы 3-буквенного кода по ISO нужной валюты (см.  :doc:`справку по валютам <currencies>`).
* Когда вы вводите выражение к сумме, что уже была там (например, ``USD 12.34/1.055``), то старайтесь сохранить первоначальную сумму в качестве первого операнда. Существует неопределенность со знаком ``.``, про который трудно сказать, когда он десятичный разделитель, а когда - разделитель тысяч, который мог быть подставлен там во время форматирования. Мы рассматриваем первый операнд как сумму, а другие операнды как простые десятичные дроби.

Автодополнение, Автозаполнение и Поиски
-------------------------------------

moneyGuru имеет расширенные возможности автозавершения и автодополнения. Как только вы вводите что-нибудь в авто-дополняемое поле (Описание, Контрагент, Счет), moneyGuru будет искать это в других транзакциях и предложит вам завершение. Вы можете пролистать предложения стрелками вверх и вниз. Чтобы принять предложение, просто нажмите Tab. Вы также можете просто продолжать печатать.

Функция "автозаполнение" автоматически заполнит пустые поля после нажатия Tab в автоматически дополняемых полях. Например, если Контрагент - первый автодополняемый столбец, то при вводе существующего контрагента все следующие поля автоматически заполнятся значениями из последней транзакции с этим контрагентом.

В Mac OS X можно вызвать список подстановок для любого автодополняемого поля. Вам нужно ввести контрагента и вы **знаете**, что он был указан ранее в транзакциях, но не помните с какой он буквы начинается? Нажмите |cmd|\ L и появится диалоговое окно со списком всех ваших контрагентов. Поле поиска позволяет выполнять нечеткий поиск (что означает, что вам не придется вводить начальные символы имени контрагента, а только несколько букв, которые в нем есть), который сделает наиболее актуальных контрагентов в списке первыми.

.. |edition_buttons| image:: image/edition_buttons.png
.. |edition_account_panel| image:: image/edition_account_panel.png
.. |edition_transaction_panel| image:: image/edition_transaction_panel.png
.. |edition_three_way_split| image:: image/edition_three_way_split.png
.. |edition_mass_edition_panel| image:: image/edition_mass_edition_panel.png
.. |backward_16| image:: image/backward_16.png
.. |forward_16| image:: image/forward_16.png

